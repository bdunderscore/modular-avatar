---
sidebar_position: 1
---

# 反应式组件

**反应式组件** 是一种根据其游戏对象（及其父对象）的活动状态或 [**菜单项**](../menu-item.md) 的选中状态来对你的虚拟形象应用某种效果的组件。这使你无需手动设置任何动画，即可构建简单的开关、在更换衣装时调整 Blendshape 等等。

目前可用的反应式组件如下：

* [**Object Toggle**](./object-toggle.md) - 控制其他游戏对象的活动状态。
* [**Shape Changer**](./shape-changer.md) - 修改目标渲染器上的 Blendshape。
* [**Material Setter**](./material-setter.md) - 更改目标渲染器上的材质。
* [**Material Swap**](./material-swap.md) - 将材质替换为其他材质。

## 反应式组件的通用规则

一般来说，当一个反应式组件处于**活动状态**时，它会应用某种效果。一个反应式组件在以下情况被视为活动：

-   其游戏对象和所有父对象在场景层级结构中是活动的。
-   如果反应式组件位于与 [**菜单项**](../menu-item.md) 相同的游戏对象上或其子对象上，则该菜单项被选中。
    -   请注意，只考虑最近的父级菜单项（父级子菜单会被忽略）。

在构建虚拟形象后，反应式组件会对以下内容作出响应：

-   更改游戏对象状态的动画。
-   影响其他反应式组件活动状态的 **Object Toggles**。
-   菜单项的选择。

你也可以选择“反转条件”选项；在这种情况下，当上述任何条件**不**为真时，组件的效果就会被应用。

### 优先级规则

如果多个反应式组件同时处于活动状态，并且它们的效果发生冲突（例如，一个试图关闭一个游戏对象，另一个试图打开它），则在层级结构中位置最低的组件将优先。

### 反应时机

:::warning

随着我们优化反应式组件的实现，它们的精确反应时机在未来可能会发生变化。你不应该依赖反应式组件的精确时机来实现复杂的效果。

:::

对游戏对象活动状态变化作出响应的反应式组件会在一帧延迟后作出响应。当游戏对象被停用时，其停用操作也会延迟一帧，以便同时发生。有关此情况的原因，请参阅 **[Shape Changer](shape-changer.md)**。

如果一个反应式组件控制另一个反应式组件的状态，则每个反应式组件的触发之间会有一帧的延迟。延迟会单独应用于每个反应式组件，因此如果存在 A -> B -> C 的结构，而 A 被关闭，时机将如下：

* 第 1 帧：什么都没有发生（A 的停用被延迟）。
* 第 2 帧：A 被停用（B 的停用被延迟）。
* 第 3 帧：B 和 C 同时被停用。

### 调试问题

反应式组件系统包含一个调试器，可用于模拟虚拟形象上各种对象或菜单项的开关效果。要访问它，请右键点击一个游戏对象，然后选择 `Modular Avatar -> Show Reaction Debugger`。有关其工作原理的详细描述，请参阅 **[调试器文档](./debugger/index.md)**。