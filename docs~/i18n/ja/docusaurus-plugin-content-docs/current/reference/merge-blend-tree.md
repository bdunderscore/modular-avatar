# Merge Motion (Blend Tree)

![Merge Blend Tree](merge-blend-tree.png)

Merge Blend Treeは、複数のブレンドツリーを1つのFXレイヤーにマージすることができます。
複数のギミックを1つのレイヤーにまとめて、負荷を低減するための高度なコンポーネントです。
また、常に実行されるアニメーションを設定するためにも使用できます。

:::info

1.12以前では、このコンポーネントは「Merge Blend Tree」と呼ばれていました。1.12では、アニメーションクリップのマージにも
対応するように拡張されたため、名前が「Merge Motion」に変更されました。1.11以前のMerge Blend Treeで作成された
既存のアセットは、新しいMerge Motionコンポーネントを使用するように自動的にアップグレードされます。

なお、APIでは、互換性のためこのコンポーネントは引き続き`ModularAvatarMergeBlendTree`と呼ばれています。

:::

## いつ使うもの？

常に再生させるモーション（アニメーションクリップ、またはブレンドツリー）を設定したい場合に、Merge Motionを使用してください。

## いつ使わないもの？

モーションを無効にしたり、モーションタイムを制御したりする必要がある場合は、Merge Motionを使わないでください。

## ブレンドツリーでのセットアップ方法

まず、ブレンドツリーのアセットを作成します。プロジェクトウィンドウで右クリックして、Create -> BlendTreeを選択してください。

ブレンドツリーを設定したら、Merge Blend Treeコンポーネントを追加して、「ブレンドツリー」フィールドに指定します。

パスモードと相対パスルートは、Merge Animatorと同様に設定できます。
詳細は、[Merge Animatorのドキュメント](merge-animator.md)を参照してください。

## アニメーションのマージ

アニメーションを「モーション（またはブレンドツリー）」フィールドに配置するだけです。アニメーションは常に再生されます。

## マージ方法について

Modular Avatarは、FXコントローラーの一番上に新しいレイヤーを作成します。
このレイヤーには、Write Defaultsがオンになっている単一のステートが含まれています。
マージされたモーションは、パラメーターが常に1に設定されているこのDirect Blend Treeに接続されます。