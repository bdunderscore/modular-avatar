# Bone Proxy

![Bone Proxy](bone-proxy-compare.png)

Bone Proxyを使うことで、プレハブ化したオブジェクトを元のアバターのボーンの中に配置することができます。
たとえば、[Clapサンプル](/docs/samples/#clap)では、アバターの手の中にオブジェクトを配置するために使います。

Bone Proxyは同時に元の位置を指定するアニメーターを調整し、移動先のパスを指定するように変更します。

## いつ使うもの？

アバターの既存オブジェクトの中に物を配置したい時に使います。

## 非推奨の場合

Bone Proxyは衣装向けのものではありません。代わりに[Merge Armature](merge-armature.md)を使いましょう。

## セットアップ方法

Bone Proxyコンポーネントをプレハブの中のオブジェクトに追加して、移動先オブジェクトをターゲットにドラッグアンドドロップ。
指定した移動先オブジェクトに移動させられます。

### プレハブでの仕様

指定したオブジェクトを元に、自動的にヒューマノイドボーンとその先の相対パスに変換するため、
プレハブとして保存してもオブジェクトの引用を復元できます。

内部設定を直接いじりたい場合は詳細設定を開いてください。

### 配置モード

使い方に応じて、配置するモードが二つあります。

「子として・ルートに配置」の設定では、Bone Proxyがアタッチされているオブジェクトがターゲットのオブジェクトの子になり、
位置や姿勢がその親と同じになります。アバターに依存しないプレハブに推奨されます。サンプルのClapやFingerpenもこのモードです。

「子として・ワールド位置と向きを維持」の設定では、Bone Proxyがアタッチされているオブジェクトがターゲットのオブジェクトの子になりますが、
位置や姿勢がワールド座標で維持されます。このモードはアバターに依存してしまうが、例えばClothコライダーの配置などに便利かもしれません。

位置・向きの片方だけ元のままにして、もう片方をボーンに合わせることも可能です。複雑なギミックを作るときに役立つ場合もあるかもしれません。

Bone Proxyのターゲットを設定する時は、ターゲットとの相互位置や姿勢を参考に、配置モードが設定されていない場合は自動的に設定されます。